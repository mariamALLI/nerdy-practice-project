var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function o(){return Object.create(null)}function s(t){t.forEach(r)}function c(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}const l="undefined"!=typeof window;let u=l?()=>window.performance.now():()=>Date.now(),d=l?t=>requestAnimationFrame(t):t;const f=new Set;function h(t){f.forEach((e=>{e.c(t)||(f.delete(e),e.f())})),0!==f.size&&d(h)}function p(t,e){t.appendChild(e)}function g(t,e,n){t.insertBefore(e,n||null)}function m(t){t.parentNode.removeChild(t)}function v(t){return document.createElement(t)}function y(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function w(t){return document.createTextNode(t)}function k(){return w(" ")}function b(){return w("")}function $(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function x(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function j(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function C(t,e,n){t.classList[n?"add":"remove"](e)}let M;function T(t){M=t}function _(t){(function(){if(!M)throw new Error("Function called outside component initialization");return M})().$$.on_mount.push(t)}const z=[],S=[],E=[],L=[],I=Promise.resolve();let U=!1;function A(t){E.push(t)}let H=!1;const B=new Set;function N(){if(!H){H=!0;do{for(let t=0;t<z.length;t+=1){const e=z[t];T(e),O(e.$$)}for(T(null),z.length=0;S.length;)S.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];B.has(e)||(B.add(e),e())}E.length=0}while(z.length);for(;L.length;)L.pop()();U=!1,H=!1,B.clear()}}function O(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const P=new Set;let D;function V(t,e){t&&t.i&&(P.delete(t),t.i(e))}function F(t,e,n,r){if(t&&t.o){if(P.has(t))return;P.add(t),D.c.push((()=>{P.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function q(t,e,n){const{fragment:o,on_mount:i,on_destroy:a,after_update:l}=t.$$;o&&o.m(e,n),A((()=>{const e=i.map(r).filter(c);a?a.push(...e):s(e),t.$$.on_mount=[]})),l.forEach(A)}function J(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function R(t,e){-1===t.$$.dirty[0]&&(z.push(t),U||(U=!0,I.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function G(e,n,r,c,i,a,l=[-1]){const u=M;T(e);const d=n.props||{},f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:i,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:o(),dirty:l,skip_bound:!1};let h=!1;if(f.ctx=r?r(e,d,((t,n,...r)=>{const o=r.length?r[0]:n;return f.ctx&&i(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),h&&R(e,t)),n})):[],f.update(),h=!0,s(f.before_update),f.fragment=!!c&&c(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(m)}else f.fragment&&f.fragment.c();n.intro&&V(e.$$.fragment),q(e,n.target,n.anchor),N()}T(u)}class K{$destroy(){J(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Q=async(t,e)=>{try{const n=await fetch(apiBaseUrl+t,{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json","access-token":accessToken,"refresh-token":refreshToken}});if(200!==n.status)throw new Error(await n.text());const r=n.headers.get("access-token"),o=n.headers.get("refresh-token");r&&o&&(accessToken=r,refreshToken=o,tsvscode.postMessage({type:"tokens",accessToken:r,refreshToken:o}));return await n.json()}catch(t){throw tsvscode.postMessage({type:"onError",value:t.message}),t}},W=async t=>{try{const e=await fetch(apiBaseUrl+t,{headers:{"access-token":accessToken,"refresh-token":refreshToken}});if(200!==e.status)throw new Error(await e.text());const n=e.headers.get("access-token"),r=e.headers.get("refresh-token");n&&r&&(accessToken=n,refreshToken=r,tsvscode.postMessage({type:"tokens",accessToken:n,refreshToken:r}));return await e.json()}catch(t){throw tsvscode.postMessage({type:"onError",value:t.message}),t}},X=t=>new Promise((e=>setTimeout(e,t))),Y=(t,e)=>{for(const n of e)""===n.text?tt(t,n.range[0],n.range[1]):0===n.rangeLength?Z(t,n.range[0],n.text):et(t,n.range[0],n.range[1],n.text)},Z=(t,e,n)=>{const r=n.split("\n"),o=t[e.line]||"";1!==r.length?t.splice(0,t.length,...t.slice(0,e.line-2),o.slice(0,e.character)+r[0],...r.slice(1,r.length-1),r[r.length-1]+o.slice(e.character),...t.slice(e.line+1)):t[e.line]=o.slice(0,e.character)+n+o.slice(e.character+1)},tt=(t,e,n)=>{const r=t[e.line]||"";e.line!==n.line?(t[e.line]=r.slice(0,e.character)+(t[n.line]||"").slice(n.character),t.splice(e.line+1,n.line-e.line)):t[e.line]=r.slice(0,e.character)+r.slice(n.character)},et=(t,e,n,r)=>{tt(t,e,n),Z(t,e,r)},nt=[];function rt(t){const e=t-1;return e*e*e+1}function ot(t){return"[object Date]"===Object.prototype.toString.call(t)}function st(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map(((e,n)=>st(t[n],e)));return t=>n.map((e=>e(t)))}if("object"===n){if(!t||!e)throw new Error("Object cannot be null");if(ot(t)&&ot(e)){t=t.getTime();const n=(e=e.getTime())-t;return e=>new Date(t+e*n)}const n=Object.keys(e),r={};return n.forEach((n=>{r[n]=st(t[n],e[n])})),t=>{const e={};return n.forEach((n=>{e[n]=r[n](t)})),e}}if("number"===n){const n=e-t;return e=>t+e*n}throw new Error(`Cannot interpolate ${n} values`)}function ct(r,o={}){const s=function(e,n=t){let r;const o=[];function s(t){if(i(e,t)&&(e=t,r)){const t=!nt.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),nt.push(n,e)}if(t){for(let t=0;t<nt.length;t+=2)nt[t][0](nt[t+1]);nt.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(c,i=t){const a=[c,i];return o.push(a),1===o.length&&(r=n(s)||t),c(e),()=>{const t=o.indexOf(a);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}(r);let c,a=r;function l(t,i){if(null==r)return s.set(r=t),Promise.resolve();a=t;let l=c,p=!1,{delay:g=0,duration:m=400,easing:v=e,interpolate:y=st}=n(n({},o),i);if(0===m)return l&&(l.abort(),l=null),s.set(r=a),Promise.resolve();const w=u()+g;let k;return c=function(t){let e;return 0===f.size&&d(h),{promise:new Promise((n=>{f.add(e={c:t,f:n})})),abort(){f.delete(e)}}}((e=>{if(e<w)return!0;p||(k=y(r,t),"function"==typeof m&&(m=m(r,t)),p=!0),l&&(l.abort(),l=null);const n=e-w;return n>m?(s.set(r=t),!1):(s.set(r=k(v(n/m))),!0)})),c.promise}return{set:l,update:(t,e)=>l(t(a,r),e),subscribe:s.subscribe}}function it(t,e,n){const r=t.slice();return r[11]=e[n],r}function at(e){let n,r,o;return{c(){n=v("button"),n.textContent="replay"},m(t,s){g(t,n,s),r||(o=$(n,"click",e[8]),r=!0)},p:t,d(t){t&&m(n),r=!1,o()}}}function lt(t){let e,n,r,o,s;function c(){return t[9](t[11])}return{c(){e=v("button"),n=w(t[11]),r=w("x"),x(e,"class","plain-button svelte-1dzbhua"),C(e,"active",t[11]===t[2])},m(t,i){g(t,e,i),p(e,n),p(e,r),o||(s=$(e,"click",c),o=!0)},p(n,r){t=n,4&r&&C(e,"active",t[11]===t[2])},d(t){t&&m(e),o=!1,s()}}}function ut(e){let n,r,o,s,c,i,a,l,u,d=e[0].join("\n")+"",f="done"===e[3]&&at(e),h=[.5,1,2,3],y=[];for(let t=0;t<4;t+=1)y[t]=lt(it(e,h,t));return{c(){f&&f.c(),n=k(),r=v("div"),o=v("div"),o.textContent="Change speed:",s=k();for(let t=0;t<4;t+=1)y[t].c();c=k(),i=v("progress"),a=k(),l=v("pre"),u=w(d),x(r,"class","row svelte-1dzbhua"),i.value=e[4],x(i,"class","svelte-1dzbhua")},m(t,e){f&&f.m(t,e),g(t,n,e),g(t,r,e),p(r,o),p(r,s);for(let t=0;t<4;t+=1)y[t].m(r,null);g(t,c,e),g(t,i,e),g(t,a,e),g(t,l,e),p(l,u)},p(t,[e]){if("done"===t[3]?f?f.p(t,e):(f=at(t),f.c(),f.m(n.parentNode,n)):f&&(f.d(1),f=null),4&e){let n;for(h=[.5,1,2,3],n=0;n<4;n+=1){const o=it(t,h,n);y[n]?y[n].p(o,e):(y[n]=lt(o),y[n].c(),y[n].m(r,null))}for(;n<4;n+=1)y[n].d(1)}16&e&&(i.value=t[4]),1&e&&d!==(d=t[0].join("\n")+"")&&j(u,d)},i:t,o:t,d(t){f&&f.d(t),t&&m(n),t&&m(r),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(y,t),t&&m(c),t&&m(i),t&&m(a),t&&m(l)}}}function dt(t,e,n){let r;var o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,s){function c(t){try{a(r.next(t))}catch(t){s(t)}}function i(t){try{a(r.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}a((r=r.apply(t,e||[])).next())}))};let s=1,{startingChunks:c}=e,{textChunks:i}=e,{recordingSteps:l}=e,u=l&&l.length?"running":"static";const d=ct(0,{duration:100,easing:rt});a(t,d,(t=>n(4,r=t)));const f=()=>o(void 0,void 0,void 0,(function*(){if(!l||!l.length)return d.set(1),void n(3,u="done");n(3,u="running");const t=(new Date).getTime(),e=l[l.length-1][0];let r=0;for(;r<l.length;){const[o,c]=l[r],a=((new Date).getTime()-t)*s;a<o?(d.set(a/e),yield X(10)):(Y(i,c),n(0,i),r++)}d.set(1),n(3,u="done")}));_((()=>o(void 0,void 0,void 0,(function*(){yield f()}))));return t.$$set=t=>{"startingChunks"in t&&n(1,c=t.startingChunks),"textChunks"in t&&n(0,i=t.textChunks),"recordingSteps"in t&&n(7,l=t.recordingSteps)},[i,c,s,u,r,d,f,l,()=>{n(0,i=[...c]),d.set(0),f()},t=>{n(2,s=t)}]}class ft extends K{constructor(t){super(),G(this,t,dt,ut,i,{startingChunks:1,textChunks:0,recordingSteps:7})}}function ht(t){let e,n,r,o,s,c,i=t[1].numLikes.toLocaleString()+"";function a(t,e){return!t[1].hasLiked&&t[4]?vt:t[4]?mt:t[1].hasLiked||t[4]?t[1].hasLiked&&!t[4]?pt:void 0:gt}let l=a(t),u=l&&l(t),d=(currentUserId===t[1].creatorId||"dac7eb0f-808b-4842-b193-5d68cc082609"===currentUserId)&&yt(t);function f(t,e){return t[2]||currentUserId===t[1].creatorId?currentUserId!==t[1].creatorId?wt:void 0:kt}let h=f(t),y=h&&h(t);return{c(){u&&u.c(),e=k(),n=v("div"),r=w(i),o=k(),d&&d.c(),s=k(),y&&y.c(),c=b(),x(n,"class","likes svelte-17j3d07")},m(t,i){u&&u.m(t,i),g(t,e,i),g(t,n,i),p(n,r),g(t,o,i),d&&d.m(t,i),g(t,s,i),y&&y.m(t,i),g(t,c,i)},p(t,n){l===(l=a(t))&&u?u.p(t,n):(u&&u.d(1),u=l&&l(t),u&&(u.c(),u.m(e.parentNode,e))),2&n&&i!==(i=t[1].numLikes.toLocaleString()+"")&&j(r,i),currentUserId===t[1].creatorId||"dac7eb0f-808b-4842-b193-5d68cc082609"===currentUserId?d?d.p(t,n):(d=yt(t),d.c(),d.m(s.parentNode,s)):d&&(d.d(1),d=null),h===(h=f(t))&&y?y.p(t,n):(y&&y.d(1),y=h&&h(t),y&&(y.c(),y.m(c.parentNode,c)))},d(t){u&&u.d(t),t&&m(e),t&&m(n),t&&m(o),d&&d.d(t),t&&m(s),y&&y.d(t),t&&m(c)}}}function pt(e){let n,r,o;return{c(){n=y("svg"),r=y("g"),o=y("path"),x(o,"d","M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12z"),x(n,"viewBox","0 0 24 24"),x(n,"fill","rgb(224, 36, 94)"),x(n,"class","heart svelte-17j3d07")},m(t,e){g(t,n,e),p(n,r),p(r,o)},p:t,d(t){t&&m(n)}}}function gt(e){let n,r,o;return{c(){n=y("svg"),r=y("g"),o=y("path"),x(o,"d","M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12zM7.354 4.225c-2.08 0-3.903 1.988-3.903 4.255 0 5.74 7.034 11.596 8.55 11.658 1.518-.062 8.55-5.917 8.55-11.658 0-2.267-1.823-4.255-3.903-4.255-2.528 0-3.94 2.936-3.952 2.965-.23.562-1.156.562-1.387 0-.014-.03-1.425-2.965-3.954-2.965z"),x(n,"viewBox","0 0 24 24"),x(n,"fill","#fff"),x(n,"class","heart svelte-17j3d07")},m(t,e){g(t,n,e),p(n,r),p(r,o)},p:t,d(t){t&&m(n)}}}function mt(e){let n,r,o,s,c;return{c(){n=y("svg"),r=y("g"),o=y("path"),x(o,"d","M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12z"),x(n,"viewBox","0 0 24 24"),x(n,"fill","rgb(224, 36, 94)"),x(n,"class","heart svelte-17j3d07")},m(t,i){g(t,n,i),p(n,r),p(r,o),s||(c=$(n,"click",e[6]),s=!0)},p:t,d(t){t&&m(n),s=!1,c()}}}function vt(e){let n,r,o,s,c;return{c(){n=y("svg"),r=y("g"),o=y("path"),x(o,"d","M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.814-1.148 2.354-2.73 4.645-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.376-7.454 13.11-10.037 13.157H12zM7.354 4.225c-2.08 0-3.903 1.988-3.903 4.255 0 5.74 7.034 11.596 8.55 11.658 1.518-.062 8.55-5.917 8.55-11.658 0-2.267-1.823-4.255-3.903-4.255-2.528 0-3.94 2.936-3.952 2.965-.23.562-1.156.562-1.387 0-.014-.03-1.425-2.965-3.954-2.965z"),x(n,"viewBox","0 0 24 24"),x(n,"fill","#fff"),x(n,"class","heart svelte-17j3d07")},m(t,i){g(t,n,i),p(n,r),p(r,o),s||(c=$(n,"click",e[5]),s=!0)},p:t,d(t){t&&m(n),s=!1,c()}}}function yt(e){let n,r,o,s,c,i,a;return{c(){n=y("svg"),r=y("polyline"),o=y("path"),s=y("line"),c=y("line"),x(r,"points","3 6 5 6 21 6"),x(o,"d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"),x(s,"x1","10"),x(s,"y1","11"),x(s,"x2","10"),x(s,"y2","17"),x(c,"x1","14"),x(c,"y1","11"),x(c,"x2","14"),x(c,"y2","17"),x(n,"class","trash svelte-17j3d07"),x(n,"width","18"),x(n,"height","18"),x(n,"viewBox","0 0 24 24"),x(n,"fill","none"),x(n,"stroke","#fff"),x(n,"stroke-width","2"),x(n,"stroke-linecap","round"),x(n,"stroke-linejoin","round")},m(t,l){g(t,n,l),p(n,r),p(n,o),p(n,s),p(n,c),i||(a=$(n,"click",e[7]),i=!0)},p:t,d(t){t&&m(n),i=!1,a()}}}function wt(e){let n,r,o,s,c;return{c(){n=y("svg"),r=y("g"),o=y("path"),x(o,"fill","white"),x(o,"d","M14,8c0-2.21-1.79-4-4-4S6,5.79,6,8s1.79,4,4,4S14,10.21,14,8z M2,18v1c0,0.55,0.45,1,1,1h14c0.55,0,1-0.45,1-1v-1 c0-2.66-5.33-4-8-4S2,15.34,2,18z M18,10h4c0.55,0,1,0.45,1,1v0c0,0.55-0.45,1-1,1h-4c-0.55,0-1-0.45-1-1v0 C17,10.45,17.45,10,18,10z"),x(n,"viewBox","0 0 24 24"),x(n,"width","18"),x(n,"height","18"),x(n,"class","friend svelte-17j3d07")},m(t,i){g(t,n,i),p(n,r),p(r,o),s||(c=$(n,"click",e[9]),s=!0)},p:t,d(t){t&&m(n),s=!1,c()}}}function kt(e){let n,r,o,s,c,i;return{c(){n=y("svg"),r=y("g"),o=y("path"),s=y("path"),x(o,"d","M0 0h24v24H0V0z"),x(o,"fill","none"),x(s,"fill","white"),x(s,"d","M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm0 8c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm-6 4c.22-.72 3.31-2 6-2 2.7 0 5.8 1.29 6 2H9zm-3-3v-3h3v-2H6V7H4v3H1v2h3v3z"),x(n,"viewBox","0 0 24 24"),x(n,"width","18"),x(n,"height","18"),x(n,"class","friend svelte-17j3d07")},m(t,a){g(t,n,a),p(n,r),p(r,o),p(r,s),c||(i=$(n,"click",e[8]),c=!0)},p:t,d(t){t&&m(n),c=!1,i()}}}function bt(e){let n;return{c(){n=v("p"),n.textContent="could not find story"},m(t,e){g(t,n,e)},p:t,i:t,o:t,d(t){t&&m(n)}}}function $t(t){let e,n;return e=new ft({props:{startingChunks:t[1].text.split("\n"),textChunks:t[1].text.split("\n"),recordingSteps:t[1].recordingSteps}}),{c(){var t;(t=e.$$.fragment)&&t.c()},m(t,r){q(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.startingChunks=t[1].text.split("\n")),2&n&&(r.textChunks=t[1].text.split("\n")),2&n&&(r.recordingSteps=t[1].recordingSteps),e.$set(r)},i(t){n||(V(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){J(e,t)}}}function xt(e){let n,r,o=e[3].message+"";return{c(){var t,e,s;n=v("p"),r=w(o),t="color",e="red",n.style.setProperty(t,e,s?"important":"")},m(t,e){g(t,n,e),p(n,r)},p(t,e){8&e&&o!==(o=t[3].message+"")&&j(r,o)},i:t,o:t,d(t){t&&m(n)}}}function jt(e){let n;return{c(){n=v("p"),n.textContent="loading..."},m(t,e){g(t,n,e)},p:t,i:t,o:t,d(t){t&&m(n)}}}function Ct(e){let n,r,o,c,i,a,l,u,d,f,h,y,w,$,j,C=story.flair in flairMap&&function(e){let n,r;return{c(){n=v("img"),x(n,"class","flair svelte-17j3d07"),n.src!==(r=flairMap[story.flair])&&x(n,"src",r)},m(t,e){g(t,n,e)},p:t,d(t){t&&m(n)}}}(),M=e[1]&&ht(e);const T=[jt,xt,$t,bt],_=[];function z(t,e){return t[0]?0:t[3]?1:t[1]?2:3}return y=z(e),w=_[y]=T[y](e),{c(){n=v("div"),r=v("img"),c=k(),i=v("div"),a=v("div"),a.textContent=`${story.creatorUsername.slice(0,30)}`,l=k(),C&&C.c(),u=k(),M&&M.c(),d=k(),f=v("div"),f.innerHTML='<button class="dropbtn svelte-17j3d07">OPTIONS \n      <i class="fa fa-caret-down"></i></button> \n    <div class="menu-content svelte-17j3d07"><a href="#" class="svelte-17j3d07">Hide stories</a> \n      <a href="#" id="reportBtn" class="svelte-17j3d07">Report user</a></div>',h=k(),w.c(),$=b(),x(r,"alt","avatar"),x(r,"class","pic svelte-17j3d07"),r.src!==(o=story.creatorAvatarUrl)&&x(r,"src",o),x(a,"class","username"),x(i,"class","username-and-flair svelte-17j3d07"),x(f,"class","menu svelte-17j3d07"),x(n,"class","top svelte-17j3d07")},m(t,e){g(t,n,e),p(n,r),p(n,c),p(n,i),p(i,a),p(i,l),C&&C.m(i,null),p(n,u),M&&M.m(n,null),p(n,d),p(n,f),g(t,h,e),_[y].m(t,e),g(t,$,e),j=!0},p(t,[e]){story.flair in flairMap&&C.p(t,e),t[1]?M?M.p(t,e):(M=ht(t),M.c(),M.m(n,d)):M&&(M.d(1),M=null);let r=y;y=z(t),y===r?_[y].p(t,e):(D={r:0,c:[],p:D},F(_[r],1,1,(()=>{_[r]=null})),D.r||s(D.c),D=D.p,w=_[y],w?w.p(t,e):(w=_[y]=T[y](t),w.c()),V(w,1),w.m($.parentNode,$))},i(t){j||(V(w),j=!0)},o(t){F(w),j=!1},d(t){t&&m(n),C&&C.d(),M&&M.d(),t&&m(h),_[y].d(t),t&&m($)}}}function Mt(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,s){function c(t){try{a(r.next(t))}catch(t){s(t)}}function i(t){try{a(r.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}a((r=r.apply(t,e||[])).next())}))};let o=!0,s=null,c=!1,i=null,a=!0,l=""!==accessToken;_((()=>r(void 0,void 0,void 0,(function*(){try{l&&n(2,c=story.creatorIsFriend);const t=yield W(`/text-story/${story.id}`);n(1,s=t.story)}catch(t){n(3,i=t)}n(0,o=!1)}))));return[o,s,c,i,a,async()=>{n(4,a=!1);try{await Q(`/like-text-story/${s.id}`,{}),n(1,s.hasLiked=!0,s),n(1,s.numLikes++,s)}catch{}n(4,a=!0)},async()=>{n(4,a=!1);try{await Q(`/unlike-text-story/${s.id}`,{}),n(1,s.hasLiked=!1,s),n(1,s.numLikes--,s)}catch{}n(4,a=!0)},async()=>{try{await Q("/delete-text-story/"+s.id,{}),tsvscode.postMessage({type:"close"}),tsvscode.postMessage({type:"onInfo",value:"Delete successful, but the story is still showing because I'm too lazy to clear the cache atm"})}catch{}},async()=>{try{await Q(`/add-friend/${story.creatorUsername}`,{});!0===(await W(`/is-friend/${story.creatorUsername}`)).ok?n(2,c=!0):tsvscode.postMessage({type:"onError",value:"Something went wrong! This user might have blocked you."})}catch{}},async()=>{await Q(`/remove-friend/${story.creatorUsername}`,{}),n(2,c=!1)}]}return new class extends K{constructor(t){super(),G(this,t,Mt,Ct,i,{})}}({target:document.body})}();
//# sourceMappingURL=view-story.js.map
